# ファクトリ

<!-- MarkdownTOC -->

- ファクトリとは
- ファクトリの設計
    - （1）コンストラクタで十分な場合
    - （2）集約ルートに実装するファクトリ
    - （3）サービスに実装するファクトリ

<!-- /MarkdownTOC -->


## ファクトリとは
DDDの「ファクトリ」: 「<strong style="color: blue;">ユビキタス言語を用いて集約をシンプルに生成する</strong>」

DDDのファクトリとしては、下記のようなシナリオがあります

 1. 特定の集約にて、別のオブジェクト(主に**集約**)を生成
 2. サービスにて、別の「境界づけられたコンテキスト」のオブジェクトをローカルの「境界づけられたコンテキスト」の型のオブジェクトに変換して生成

IDDD本では、このように複雑な生成処理を分離することで、全体を理解しやすくできることがファクトリのメリットと紹介しています。

## ファクトリの設計
ここからはオブジェクトの生成のパターンについて見ていきましょう。

### （1）コンストラクタで十分な場合

> - メソッドの場所 : クラス本体
> - メソッド名 : クラス名(コンストラクタ)
> - 特徴 :
>     - コンストラクタのためシンプル
>     - ユビキタス言語ではない
>     - 複雑な生成（他の集約の生成など）に適さない
>     - 引数が多い


### （2）集約ルートに実装するファクトリ

> - メソッドの場所 : 集約
> - メソッド名 : ユビキタス言語
> - 特徴 :
>     - 複雑な生成が可能
>     - 不変条件を満たせる
>     - 引数を減らしたりすることができる

### （3）サービスに実装するファクトリ

> - メソッドの場所 : ドメインサービス
> - メソッド名 : ユビキタス言語
> - 特徴 :
>     - 境界づけられたコンテキスト間の変換が可能

